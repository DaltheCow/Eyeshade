!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=10)}({1:function(t,n,e){"use strict";e.d(n,"a",(function(){return r})),e.d(n,"c",(function(){return o})),e.d(n,"b",(function(){return i}));var r=function(t,n){var e="settings"===t?chrome.storage.sync:chrome.storage.local,r=new Promise((function(n){e.get(t,(function(t){return n(t)}))}));return n?r.then(n):r},o=function(t,n,e){var r="settings"===t?chrome.storage.sync:chrome.storage.local,o=new Promise((function(e){r.set(n,(function(){r.get(t,(function(t){return e(t)}))}))}));return e?o.then(e):o},i=function(t,n){var e=t.map((function(t){return{key:t,storage:chrome.storage["settings"===t?"sync":"local"]}})),r=Promise.all(e.map((function(t){var n=t.storage,e=t.key;return new Promise((function(t){n.get(e,(function(n){return t(n)}))}))}))).then((function(n){var e={};return n.forEach((function(n,r){return e[t[r]]=n[t[r]]})),e}));return n?r.then(n):r}},10:function(t,n,e){"use strict";e.r(n);var r=e(1);function o(t,n,e){e.filter((function(t){return 0===n.indexOf("https://"+t)||0===n.indexOf("http://"+t)})).length>0&&chrome.tabs.update(t,{url:"not_available/not_available.html"})}chrome.tabs.query({},(function(t){Array.from(t).forEach((function(t){chrome.pageAction.show(t.id)}))})),Object(r.b)(["settings"]).then((function(t){!function(t,n){var e=t.settings||{},o=e.isBlocking,i=e.siteList,u={isBlocking:o=Boolean(o),siteList:i=void 0===i?[]:i},c={};Object(r.c)("settings",{settings:u}).then((function(t){c=Object.assign(c,t),n(c)}))}(t,(function(t){t.settings.isBlocking&&chrome.tabs.query({},(function(n){Array.from(n).forEach((function(n){o(n.id,n.url,t.settings.siteList)}))}))}))})),chrome.tabs.onUpdated.addListener((function(t,n){chrome.pageAction.show(t),Object(r.a)("settings",(function(e){e.settings.isBlocking&&n.url&&o(t,n.url,e.settings.siteList)}))})),chrome.storage.onChanged.addListener((function(t,n){if(t.settings){var e=t.settings,r=e.oldValue,i=e.newValue;if(r&&i){var u=r.isBlocking,c=r.siteList,s=i.isBlocking,a=i.siteList,f=!u&&s,l=c.length<a.length;(f||s&&l)&&chrome.tabs.query({},(function(t){Array.from(t).forEach((function(t){o(t.id,t.url,a)}))}))}}}))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbW9kdWxlcy9zdG9yYWdlLmpzIiwid2VicGFjazovLy8uL2JhY2tncm91bmQvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZXRTdG9yYWdlIiwiY2FsbGJhY2siLCJzdG9yYWdlIiwiY2hyb21lIiwicHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0U3RvcmFnZSIsImRhdGEiLCJnZXRTdG9yYWdlQWxsIiwia2V5cyIsInN0b3JhZ2VzS2V5cyIsInN0b3JhZ2VLZXkiLCJyZXMiLCJpdGVtIiwiYmxvY2tTaXRlcyIsInRhYklkIiwidXJsIiwic2l0ZUxpc3QiLCJzaXRlIiwiQXJyYXkiLCJ0YWIiLCJwcmV2U2V0dGluZ3MiLCJpc0Jsb2NraW5nIiwic2V0dGluZ3MiLCJCb29sZWFuIiwibmV3RGF0YSIsImVuc3VyZVNldHRpbmdzIiwiY2hhbmdlSW5mbyIsImNoYW5nZXMiLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwib0lzQmxvY2tpbmciLCJvU2l0ZUxpc3QiLCJuSXNCbG9ja2luZyIsIm5TaXRlTGlzdCIsImJsb2NrRW5hYmxlZCIsInNpdGVBZGRlZCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIs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SCxFQVJvQixXQU9aSSxFQUNSSixFQVJvQixTQVNsQkssR0FBZ0JKLEdBQXRCLEVBQ01LLEVBQVlKLFNBQW1CRSxFQURyQyxRQUVtQkMsR0FBa0JGLEdBRnJDLElBSUUvQixzQkFBc0IsWUFDcEJpQix1QkFBeUIsU0FBQUMsR0FDdkJOLEVBQVdNLEVBQUQsR0FBU0EsRUFBVCxJQUFWTiIsImZpbGUiOiJiYWNrZ3JvdW5kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEwKTtcbiIsImV4cG9ydCBjb25zdCBnZXRTdG9yYWdlID0gKGtleSwgY2FsbGJhY2spID0+IHtcbiAgY29uc3Qgc3RvcmFnZSA9IChrZXkgPT09ICdzZXR0aW5ncycgPyBjaHJvbWUuc3RvcmFnZS5zeW5jIDogY2hyb21lLnN0b3JhZ2UubG9jYWwpO1xuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHN0b3JhZ2UuZ2V0KGtleSwgKGRhdGEpID0+IHJlc29sdmUoZGF0YSkpO1xuICB9KTtcbiAgcmV0dXJuIChjYWxsYmFjayA/IHByb21pc2UudGhlbihjYWxsYmFjaykgOiBwcm9taXNlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRTdG9yYWdlID0gKGtleSwgb2JqZWN0LCBjYWxsYmFjaykgPT4ge1xuICBjb25zdCBzdG9yYWdlID0gKGtleSA9PT0gJ3NldHRpbmdzJyA/IGNocm9tZS5zdG9yYWdlLnN5bmMgOiBjaHJvbWUuc3RvcmFnZS5sb2NhbCk7XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgc3RvcmFnZS5zZXQob2JqZWN0LCAoKSA9PiB7XG4gICAgICBzdG9yYWdlLmdldChrZXksIGRhdGEgPT4ge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShkYXRhKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIChjYWxsYmFjayA/IHByb21pc2UudGhlbihjYWxsYmFjaykgOiBwcm9taXNlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRTdG9yYWdlQWxsID0gKGtleXMsIGNhbGxiYWNrKSA9PiB7XG4gIGNvbnN0IHN0b3JhZ2VzS2V5cyA9IGtleXMubWFwKGtleSA9PiB7XG4gICAgcmV0dXJuIHsga2V5LCBzdG9yYWdlOiBjaHJvbWUuc3RvcmFnZVsoa2V5ID09PSAnc2V0dGluZ3MnID8gJ3N5bmMnIDogJ2xvY2FsJyldIH07XG4gIH0pO1xuICBsZXQgcHJvbWlzZSA9IFByb21pc2UuYWxsKHN0b3JhZ2VzS2V5cy5tYXAoc3RvcmFnZUtleSA9PiB7XG4gICAgY29uc3QgeyBzdG9yYWdlLCBrZXkgfSA9IHN0b3JhZ2VLZXk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgc3RvcmFnZS5nZXQoa2V5LCAoZGF0YSkgPT4gcmVzb2x2ZShkYXRhKSk7XG4gICAgfSk7XG4gIH0pKS50aGVuKHJlcyA9PiB7XG4gICAgY29uc3QgZGF0YSA9IHt9O1xuICAgIHJlcy5mb3JFYWNoKChpdGVtLCBpZHgpID0+IGRhdGFba2V5c1tpZHhdXSA9IGl0ZW1ba2V5c1tpZHhdXSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH0pO1xuICByZXR1cm4gKGNhbGxiYWNrID8gcHJvbWlzZS50aGVuKGNhbGxiYWNrKSA6IHByb21pc2UpO1xufTtcbiIsImltcG9ydCB7IGdldFN0b3JhZ2UsIHNldFN0b3JhZ2UsIGdldFN0b3JhZ2VBbGwgfSBmcm9tIFwiLi4vbW9kdWxlcy9zdG9yYWdlXCI7XG5cbmNocm9tZS50YWJzLnF1ZXJ5KHt9LCBmdW5jdGlvbih0YWJzKSB7XG4gIEFycmF5LmZyb20odGFicykuZm9yRWFjaCh0YWIgPT4ge1xuICAgIGNocm9tZS5wYWdlQWN0aW9uLnNob3codGFiLmlkKTtcbiAgfSk7XG59KTtcblxuKGZ1bmN0aW9uKCkge1xuICBnZXRTdG9yYWdlQWxsKFsnc2V0dGluZ3MnXSlcbiAgLnRoZW4oZGF0YSA9PiB7XG4gICAgZW5zdXJlU2V0dGluZ3MoZGF0YSwgKG5ld0RhdGEpID0+IHtcbiAgICAgIGlmIChuZXdEYXRhLnNldHRpbmdzLmlzQmxvY2tpbmcpIHtcbiAgICAgICAgY2hyb21lLnRhYnMucXVlcnkoe30sIGZ1bmN0aW9uKHRhYnMpIHtcbiAgICAgICAgICBBcnJheS5mcm9tKHRhYnMpLmZvckVhY2godGFiID0+IHtcbiAgICAgICAgICAgIGJsb2NrU2l0ZXModGFiLmlkLCB0YWIudXJsLCBuZXdEYXRhLnNldHRpbmdzLnNpdGVMaXN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSkoKTtcblxuY2hyb21lLnRhYnMub25VcGRhdGVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uKHRhYklkLCBjaGFuZ2VJbmZvKSB7XG4gICAgY2hyb21lLnBhZ2VBY3Rpb24uc2hvdyh0YWJJZCk7XG4gICAgZ2V0U3RvcmFnZSgnc2V0dGluZ3MnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBpZiAoZGF0YS5zZXR0aW5ncy5pc0Jsb2NraW5nICYmIGNoYW5nZUluZm8udXJsKSB7XG4gICAgICAgIGJsb2NrU2l0ZXModGFiSWQsIGNoYW5nZUluZm8udXJsLCBkYXRhLnNldHRpbmdzLnNpdGVMaXN0KTtcbiAgICAgIH1cbiAgfSk7XG59KTtcblxuXG5jaHJvbWUuc3RvcmFnZS5vbkNoYW5nZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24oY2hhbmdlcywgbmFtZXNwYWNlKSB7XG4gIGlmIChjaGFuZ2VzLnNldHRpbmdzKSB7XG4gICAgY29uc3QgeyBvbGRWYWx1ZSwgbmV3VmFsdWUgfSA9IGNoYW5nZXMuc2V0dGluZ3M7XG4gICAgXG4gICAgaWYgKG9sZFZhbHVlICYmIG5ld1ZhbHVlKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGlzQmxvY2tpbmc6IG9Jc0Jsb2NraW5nLFxuICAgICAgICBzaXRlTGlzdDogb1NpdGVMaXN0XG4gICAgICB9ID0gb2xkVmFsdWU7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGlzQmxvY2tpbmc6IG5Jc0Jsb2NraW5nLFxuICAgICAgICBzaXRlTGlzdDogblNpdGVMaXN0XG4gICAgICB9ID0gbmV3VmFsdWU7XG4gICAgICBjb25zdCBibG9ja0VuYWJsZWQgPSAhb0lzQmxvY2tpbmcgJiYgbklzQmxvY2tpbmcsXG4gICAgICAgICAgICBzaXRlQWRkZWQgPSBvU2l0ZUxpc3QubGVuZ3RoIDwgblNpdGVMaXN0Lmxlbmd0aCxcbiAgICAgICAgICAgIGJsb2NrVmlkcyA9IChibG9ja0VuYWJsZWQpIHx8IChuSXNCbG9ja2luZyAmJiBzaXRlQWRkZWQpO1xuICAgICAgaWYgKGJsb2NrVmlkcykge1xuICAgICAgICBjaHJvbWUudGFicy5xdWVyeSh7fSwgZnVuY3Rpb24odGFicykge1xuICAgICAgICAgIEFycmF5LmZyb20odGFicykuZm9yRWFjaCh0YWIgPT4ge1xuICAgICAgICAgICAgYmxvY2tTaXRlcyh0YWIuaWQsIHRhYi51cmwsIG5TaXRlTGlzdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGJsb2NrU2l0ZXModGFiSWQsIHVybCwgc2l0ZUxpc3QpIHtcbiAgY29uc3QgZG9lc01hdGNoID0gc2l0ZUxpc3QuZmlsdGVyKHNpdGUgPT4ge1xuICAgIHJldHVybiB1cmwuaW5kZXhPZihcImh0dHBzOi8vXCIgKyBzaXRlKSA9PT0gMCB8fCB1cmwuaW5kZXhPZihcImh0dHA6Ly9cIiArIHNpdGUpID09PSAwXG4gIH0pLmxlbmd0aCA+IDA7XG4gIGlmIChkb2VzTWF0Y2gpIHtcbiAgICBjaHJvbWUudGFicy51cGRhdGUodGFiSWQsIHt1cmw6ICdub3RfYXZhaWxhYmxlL25vdF9hdmFpbGFibGUuaHRtbCd9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlbnN1cmVTZXR0aW5ncyhkYXRhLCBjYWxsYmFjaykge1xuICBsZXQgcHJldlNldHRpbmdzID0gZGF0YS5zZXR0aW5ncyB8fCB7fTtcblxuICBsZXQgeyBpc0Jsb2NraW5nLCBzaXRlTGlzdCB9ID0gcHJldlNldHRpbmdzO1xuXG4gIGlzQmxvY2tpbmcgPSBCb29sZWFuKGlzQmxvY2tpbmcpO1xuICBzaXRlTGlzdCA9IHNpdGVMaXN0ID09PSB1bmRlZmluZWQgPyBbXSA6IHNpdGVMaXN0O1xuICBjb25zdCBzZXR0aW5ncyA9IHsgaXNCbG9ja2luZywgc2l0ZUxpc3QgfTtcbiAgLy91cGRhdGUgc3RvcmFnZSB1c2UgdG8gbmV3IHNldCBmdW5jdGlvblxuICBsZXQgbmV3RGF0YSA9IHt9O1xuICBzZXRTdG9yYWdlKCdzZXR0aW5ncycsIHsgc2V0dGluZ3MgfSkudGhlbihkYXRhID0+IHtcbiAgICBuZXdEYXRhID0gT2JqZWN0LmFzc2lnbihuZXdEYXRhLCBkYXRhKTtcbiAgICBjYWxsYmFjayhuZXdEYXRhKTtcbiAgfSk7XG59Il0sInNvdXJjZVJvb3QiOiIifQ==