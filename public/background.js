!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}({1:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return o}));var i=function(t,e){var n="settings"===t?chrome.storage.sync:chrome.storage.local,i=new Promise((function(e){n.get(t,(function(t){return e(t)}))}));return e?i.then(e):i},r=function(t,e,n){var i="settings"===t?chrome.storage.sync:chrome.storage.local,r=new Promise((function(n){i.set(e,(function(){i.get(t,(function(t){return n(t)}))}))}));return n?r.then(n):r},o=function(t,e){var n=t.map((function(t){return{key:t,storage:chrome.storage["settings"===t?"sync":"local"]}})),i=Promise.all(n.map((function(t){var e=t.storage,n=t.key;return new Promise((function(t){e.get(n,(function(e){return t(e)}))}))}))).then((function(e){var n={};return e.forEach((function(e,i){return n[t[i]]=e[t[i]]})),n}));return e?i.then(e):i}},12:function(t,e,n){"use strict";n.r(e);var i=n(1);Object(i.b)(["settings"]).then((function(t){!function(t,e){var n=t.settings||{},r=n.isBlocking,o=n.siteList,s=n.isWhiteListing,u=n.whiteListSites,c=n.redirectLink;r=Boolean(r),s=Boolean(s);var a={isBlocking:r,siteList:o=void 0===o?[]:o,isWhiteListing:s,whiteListSites:u=void 0===u?[]:u,redirectLink:c=c||""},f={};Object(i.c)("settings",{settings:a}).then((function(t){f=Object.assign(f,t),e(f)}))}(t,(function(t){var e=t.settings,n=e.isBlocking,i=e.isWhiteListing,r=e.siteList,s=e.whiteListSites,u=e.redirectLink;(n||i)&&chrome.tabs.query({},(function(t){var e=i?s:r;Array.from(t).forEach((function(t){o(t.id,t.url,e,i,u)}))}))}))})),chrome.tabs.onUpdated.addListener((function(t,e){Object(i.a)("settings",(function(n){var i=n.settings,r=i.isBlocking,s=i.isWhiteListing,u=i.siteList,c=i.whiteListSites,a=i.redirectLink;if((r||s)&&e.url){var f=s?c:u;o(t,e.url,f,s,a)}}))})),chrome.storage.onChanged.addListener((function(t,e){if(t.settings){var n=t.settings,i=n.oldValue,r=n.newValue;if(i&&r){var s=r.isBlocking,u=r.siteList,c=r.isWhiteListing,a=r.whiteListSites,f=r.redirectLink;(s||c)&&chrome.tabs.query({},(function(t){var e=c?a:u;Array.from(t).forEach((function(t){o(t.id,t.url,e,c,f)}))}))}}}));var r=function(t){return["chrome-extension://","chrome:"].some((function(e){return 0===t.indexOf(e)}))};function o(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;if(!r(e)){var s=n.find((function(t){return 0===e.indexOf("https://"+t)||0===e.indexOf("http://"+t)})),u=s&&!i||!s&&i;u&&chrome.tabs.update(t,{url:o?"https://"+o:"not_available/not_available.html"})}}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbW9kdWxlcy9zdG9yYWdlLmpzIiwid2VicGFjazovLy8uL2JhY2tncm91bmQvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZXRTdG9yYWdlIiwiY2FsbGJhY2siLCJzdG9yYWdlIiwiY2hyb21lIiwic3luYyIsImxvY2FsIiwicHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZGF0YSIsInRoZW4iLCJzZXRTdG9yYWdlIiwic2V0IiwiZ2V0U3RvcmFnZUFsbCIsImtleXMiLCJzdG9yYWdlc0tleXMiLCJtYXAiLCJhbGwiLCJzdG9yYWdlS2V5IiwicmVzIiwiZm9yRWFjaCIsIml0ZW0iLCJpZHgiLCJwcmV2U2V0dGluZ3MiLCJzZXR0aW5ncyIsImlzQmxvY2tpbmciLCJzaXRlTGlzdCIsImlzV2hpdGVMaXN0aW5nIiwid2hpdGVMaXN0U2l0ZXMiLCJyZWRpcmVjdExpbmsiLCJCb29sZWFuIiwidW5kZWZpbmVkIiwibmV3RGF0YSIsImFzc2lnbiIsImVuc3VyZVNldHRpbmdzIiwidGFicyIsInF1ZXJ5Iiwic2l0ZXMiLCJBcnJheSIsImZyb20iLCJ0YWIiLCJibG9ja1NpdGVzIiwiaWQiLCJ1cmwiLCJvblVwZGF0ZWQiLCJhZGRMaXN0ZW5lciIsInRhYklkIiwiY2hhbmdlSW5mbyIsIm9uQ2hhbmdlZCIsImNoYW5nZXMiLCJuYW1lc3BhY2UiLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwibklzQmxvY2tpbmciLCJuU2l0ZUxpc3QiLCJuSXNXaGl0ZUxpc3RpbmciLCJuV2hpdGVMaXN0U2l0ZXMiLCJpZ25vcmVTaXRlIiwic29tZSIsInNpdGUiLCJpbmRleE9mIiwiaXNXaGl0ZWxpc3QiLCJpc0luTGlzdCIsImZpbmQiLCJzaG91bGRCZUJsb2NrZWQiLCJ1cGRhdGUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FB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NkIsRUFJUkYsRUFKRjFCLFNBQ2dCNkIsRUFHZEgsRUFIRnpCLGVBQ2dCNkIsRUFFZEosRUFGRnhCLGVBQ0FDLEVBQ0V1QixFQURGdkIsY0FHbUJ3QixHQUFlRSxJQUVsQ3BELE9BQU9nQyxLQUFLQyxNQUFNLElBQUksU0FBVUQsR0FDOUIsSUFBTVQsRUFBVzZCLEVBQWtCQyxFQUFrQkYsRUFDckRoQixNQUFNQyxLQUFLSixHQUFNZixTQUFRLFNBQUNvQixHQUN4QkMsRUFBV0QsRUFBSUUsR0FBSUYsRUFBSUcsSUFBS2pCLEVBQVU2QixFQUFpQjFCLGNBU25FLElBQU00QixFQUFhLFNBQUNkLEdBRWxCLE1BRG9CLENBQUMsc0JBQXVCLFdBQ3pCZSxNQUFLLFNBQUNDLEdBQUQsT0FBZ0MsSUFBdEJoQixFQUFJaUIsUUFBUUQsT0FHaEQsU0FBU2xCLEVBQVdLLEVBQU9ILEVBQUtqQixHQUE2QyxJQUFuQ21DLEVBQW1DLHdEQUFkaEMsRUFBYyx1Q0FDM0UsSUFBSTRCLEVBQVdkLEdBQWYsQ0FDQSxJQUFNbUIsRUFBV3BDLEVBQVNxQyxNQUFLLFNBQUNKLEdBQzlCLE9BQTBDLElBQW5DaEIsRUFBSWlCLFFBQVEsV0FBYUQsSUFBaUQsSUFBbENoQixFQUFJaUIsUUFBUSxVQUFZRCxNQUVuRUssRUFBbUJGLElBQWFELElBQWtCQyxHQUFZRCxFQUNoRUcsR0FFRjdELE9BQU9nQyxLQUFLOEIsT0FBT25CLEVBQU8sQ0FDeEJILElBQUtkLEVBQWUsV0FBYUEsRUFBZSIsImZpbGUiOiJiYWNrZ3JvdW5kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEyKTtcbiIsImV4cG9ydCBjb25zdCBnZXRTdG9yYWdlID0gKGtleSwgY2FsbGJhY2spID0+IHtcbiAgY29uc3Qgc3RvcmFnZSA9IGtleSA9PT0gXCJzZXR0aW5nc1wiID8gY2hyb21lLnN0b3JhZ2Uuc3luYyA6IGNocm9tZS5zdG9yYWdlLmxvY2FsO1xuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgc3RvcmFnZS5nZXQoa2V5LCAoZGF0YSkgPT4gcmVzb2x2ZShkYXRhKSk7XG4gIH0pO1xuICByZXR1cm4gY2FsbGJhY2sgPyBwcm9taXNlLnRoZW4oY2FsbGJhY2spIDogcHJvbWlzZTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRTdG9yYWdlID0gKGtleSwgb2JqZWN0LCBjYWxsYmFjaykgPT4ge1xuICBjb25zdCBzdG9yYWdlID0ga2V5ID09PSBcInNldHRpbmdzXCIgPyBjaHJvbWUuc3RvcmFnZS5zeW5jIDogY2hyb21lLnN0b3JhZ2UubG9jYWw7XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBzdG9yYWdlLnNldChvYmplY3QsICgpID0+IHtcbiAgICAgIHN0b3JhZ2UuZ2V0KGtleSwgKGRhdGEpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoZGF0YSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBjYWxsYmFjayA/IHByb21pc2UudGhlbihjYWxsYmFjaykgOiBwcm9taXNlO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFN0b3JhZ2VBbGwgPSAoa2V5cywgY2FsbGJhY2spID0+IHtcbiAgY29uc3Qgc3RvcmFnZXNLZXlzID0ga2V5cy5tYXAoKGtleSkgPT4ge1xuICAgIHJldHVybiB7IGtleSwgc3RvcmFnZTogY2hyb21lLnN0b3JhZ2Vba2V5ID09PSBcInNldHRpbmdzXCIgPyBcInN5bmNcIiA6IFwibG9jYWxcIl0gfTtcbiAgfSk7XG4gIGxldCBwcm9taXNlID0gUHJvbWlzZS5hbGwoXG4gICAgc3RvcmFnZXNLZXlzLm1hcCgoc3RvcmFnZUtleSkgPT4ge1xuICAgICAgY29uc3QgeyBzdG9yYWdlLCBrZXkgfSA9IHN0b3JhZ2VLZXk7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgc3RvcmFnZS5nZXQoa2V5LCAoZGF0YSkgPT4gcmVzb2x2ZShkYXRhKSk7XG4gICAgICB9KTtcbiAgICB9KVxuICApLnRoZW4oKHJlcykgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSB7fTtcbiAgICByZXMuZm9yRWFjaCgoaXRlbSwgaWR4KSA9PiAoZGF0YVtrZXlzW2lkeF1dID0gaXRlbVtrZXlzW2lkeF1dKSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH0pO1xuICByZXR1cm4gY2FsbGJhY2sgPyBwcm9taXNlLnRoZW4oY2FsbGJhY2spIDogcHJvbWlzZTtcbn07XG4iLCJpbXBvcnQgeyBnZXRTdG9yYWdlLCBzZXRTdG9yYWdlLCBnZXRTdG9yYWdlQWxsIH0gZnJvbSBcIi4uL21vZHVsZXMvc3RvcmFnZVwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICBnZXRTdG9yYWdlQWxsKFtcInNldHRpbmdzXCJdKS50aGVuKChkYXRhKSA9PiB7XG4gICAgZW5zdXJlU2V0dGluZ3MoZGF0YSwgKG5ld0RhdGEpID0+IHtcbiAgICAgIGNvbnN0IHsgaXNCbG9ja2luZywgaXNXaGl0ZUxpc3RpbmcsIHNpdGVMaXN0LCB3aGl0ZUxpc3RTaXRlcywgcmVkaXJlY3RMaW5rIH0gPVxuICAgICAgICBuZXdEYXRhLnNldHRpbmdzO1xuICAgICAgaWYgKGlzQmxvY2tpbmcgfHwgaXNXaGl0ZUxpc3RpbmcpIHtcbiAgICAgICAgY2hyb21lLnRhYnMucXVlcnkoe30sIGZ1bmN0aW9uICh0YWJzKSB7XG4gICAgICAgICAgY29uc3Qgc2l0ZXMgPSBpc1doaXRlTGlzdGluZyA/IHdoaXRlTGlzdFNpdGVzIDogc2l0ZUxpc3Q7XG4gICAgICAgICAgQXJyYXkuZnJvbSh0YWJzKS5mb3JFYWNoKCh0YWIpID0+IHtcbiAgICAgICAgICAgIGJsb2NrU2l0ZXModGFiLmlkLCB0YWIudXJsLCBzaXRlcywgaXNXaGl0ZUxpc3RpbmcsIHJlZGlyZWN0TGluayk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pKCk7XG5cbmNocm9tZS50YWJzLm9uVXBkYXRlZC5hZGRMaXN0ZW5lcihmdW5jdGlvbiAodGFiSWQsIGNoYW5nZUluZm8pIHtcbiAgZ2V0U3RvcmFnZShcInNldHRpbmdzXCIsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgY29uc3QgeyBpc0Jsb2NraW5nLCBpc1doaXRlTGlzdGluZywgc2l0ZUxpc3QsIHdoaXRlTGlzdFNpdGVzLCByZWRpcmVjdExpbmsgfSA9IGRhdGEuc2V0dGluZ3M7XG4gICAgaWYgKChpc0Jsb2NraW5nIHx8IGlzV2hpdGVMaXN0aW5nKSAmJiBjaGFuZ2VJbmZvLnVybCkge1xuICAgICAgY29uc3Qgc2l0ZXMgPSBpc1doaXRlTGlzdGluZyA/IHdoaXRlTGlzdFNpdGVzIDogc2l0ZUxpc3Q7XG4gICAgICBibG9ja1NpdGVzKHRhYklkLCBjaGFuZ2VJbmZvLnVybCwgc2l0ZXMsIGlzV2hpdGVMaXN0aW5nLCByZWRpcmVjdExpbmspO1xuICAgIH1cbiAgfSk7XG59KTtcblxuY2hyb21lLnN0b3JhZ2Uub25DaGFuZ2VkLmFkZExpc3RlbmVyKGZ1bmN0aW9uIChjaGFuZ2VzLCBuYW1lc3BhY2UpIHtcbiAgaWYgKGNoYW5nZXMuc2V0dGluZ3MpIHtcbiAgICBjb25zdCB7IG9sZFZhbHVlLCBuZXdWYWx1ZSB9ID0gY2hhbmdlcy5zZXR0aW5ncztcbiAgICBpZiAob2xkVmFsdWUgJiYgbmV3VmFsdWUpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgaXNCbG9ja2luZzogbklzQmxvY2tpbmcsXG4gICAgICAgIHNpdGVMaXN0OiBuU2l0ZUxpc3QsXG4gICAgICAgIGlzV2hpdGVMaXN0aW5nOiBuSXNXaGl0ZUxpc3RpbmcsXG4gICAgICAgIHdoaXRlTGlzdFNpdGVzOiBuV2hpdGVMaXN0U2l0ZXMsXG4gICAgICAgIHJlZGlyZWN0TGluayxcbiAgICAgIH0gPSBuZXdWYWx1ZTtcbiAgICAgIC8vIFRPRE8gaW4gZnV0dXJlIGNhbiBtYWtlIGl0IHBvc3NpYmxlIHRvIHR1cm4gb2ZmIGJsb2NrIHNpdGVzIGFuZCB0aGVuIGFueSBwYWdlIHdvdWxkIGdvIGJhY2sgdG8gd2hhdCB3YXMgb3JpZ2luYWxseSBzZWFyY2hlZCAoaWYgSSBzYXZlIHNlYXJjaGVkIHZpZCBwZXIgdGFiIHByaW9yIHRvIGJsb2NraW5nIHNhaWQgcGFnZSlcbiAgICAgIGNvbnN0IGJsb2NrRW5hYmxlZCA9IG5Jc0Jsb2NraW5nIHx8IG5Jc1doaXRlTGlzdGluZztcbiAgICAgIGlmIChibG9ja0VuYWJsZWQpIHtcbiAgICAgICAgY2hyb21lLnRhYnMucXVlcnkoe30sIGZ1bmN0aW9uICh0YWJzKSB7XG4gICAgICAgICAgY29uc3Qgc2l0ZUxpc3QgPSBuSXNXaGl0ZUxpc3RpbmcgPyBuV2hpdGVMaXN0U2l0ZXMgOiBuU2l0ZUxpc3Q7XG4gICAgICAgICAgQXJyYXkuZnJvbSh0YWJzKS5mb3JFYWNoKCh0YWIpID0+IHtcbiAgICAgICAgICAgIGJsb2NrU2l0ZXModGFiLmlkLCB0YWIudXJsLCBzaXRlTGlzdCwgbklzV2hpdGVMaXN0aW5nLCByZWRpcmVjdExpbmspO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuXG4vLyBuZXZlciBibG9jayBzaXRlcyB3aXRoIHRoZXNlIHRlcm1zXG5jb25zdCBpZ25vcmVTaXRlID0gKHVybCkgPT4ge1xuICBjb25zdCBpZ25vcmVTaXRlcyA9IFtcImNocm9tZS1leHRlbnNpb246Ly9cIiwgXCJjaHJvbWU6XCJdO1xuICByZXR1cm4gaWdub3JlU2l0ZXMuc29tZSgoc2l0ZSkgPT4gdXJsLmluZGV4T2Yoc2l0ZSkgPT09IDApO1xufTtcblxuZnVuY3Rpb24gYmxvY2tTaXRlcyh0YWJJZCwgdXJsLCBzaXRlTGlzdCwgaXNXaGl0ZWxpc3QgPSBmYWxzZSwgcmVkaXJlY3RMaW5rKSB7XG4gIGlmIChpZ25vcmVTaXRlKHVybCkpIHJldHVybjtcbiAgY29uc3QgaXNJbkxpc3QgPSBzaXRlTGlzdC5maW5kKChzaXRlKSA9PiB7XG4gICAgcmV0dXJuIHVybC5pbmRleE9mKFwiaHR0cHM6Ly9cIiArIHNpdGUpID09PSAwIHx8IHVybC5pbmRleE9mKFwiaHR0cDovL1wiICsgc2l0ZSkgPT09IDA7XG4gIH0pO1xuICBjb25zdCBzaG91bGRCZUJsb2NrZWQgPSAoaXNJbkxpc3QgJiYgIWlzV2hpdGVsaXN0KSB8fCAoIWlzSW5MaXN0ICYmIGlzV2hpdGVsaXN0KTtcbiAgaWYgKHNob3VsZEJlQmxvY2tlZCkge1xuICAgIC8vIGNhbiBJIHB1c2ggdGhlIGN1cnJlbnQgdXJsIG9udG8gaGlzdG9yeSBzbyBpdCBpc24ndCBsb3N0IGJlZm9yZSByZWRpcmVjdD9cbiAgICBjaHJvbWUudGFicy51cGRhdGUodGFiSWQsIHtcbiAgICAgIHVybDogcmVkaXJlY3RMaW5rID8gXCJodHRwczovL1wiICsgcmVkaXJlY3RMaW5rIDogXCJub3RfYXZhaWxhYmxlL25vdF9hdmFpbGFibGUuaHRtbFwiLFxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVuc3VyZVNldHRpbmdzKGRhdGEsIGNhbGxiYWNrKSB7XG4gIGxldCBwcmV2U2V0dGluZ3MgPSBkYXRhLnNldHRpbmdzIHx8IHt9O1xuXG4gIGxldCB7IGlzQmxvY2tpbmcsIHNpdGVMaXN0LCBpc1doaXRlTGlzdGluZywgd2hpdGVMaXN0U2l0ZXMsIHJlZGlyZWN0TGluayB9ID0gcHJldlNldHRpbmdzO1xuXG4gIGlzQmxvY2tpbmcgPSBCb29sZWFuKGlzQmxvY2tpbmcpO1xuICBpc1doaXRlTGlzdGluZyA9IEJvb2xlYW4oaXNXaGl0ZUxpc3RpbmcpO1xuICBzaXRlTGlzdCA9IHNpdGVMaXN0ID09PSB1bmRlZmluZWQgPyBbXSA6IHNpdGVMaXN0O1xuICB3aGl0ZUxpc3RTaXRlcyA9IHdoaXRlTGlzdFNpdGVzID09PSB1bmRlZmluZWQgPyBbXSA6IHdoaXRlTGlzdFNpdGVzO1xuICByZWRpcmVjdExpbmsgPSByZWRpcmVjdExpbmsgfHwgXCJcIjtcbiAgY29uc3Qgc2V0dGluZ3MgPSB7IGlzQmxvY2tpbmcsIHNpdGVMaXN0LCBpc1doaXRlTGlzdGluZywgd2hpdGVMaXN0U2l0ZXMsIHJlZGlyZWN0TGluayB9O1xuICAvL3VwZGF0ZSBzdG9yYWdlIHVzZSB0byBuZXcgc2V0IGZ1bmN0aW9uXG4gIGxldCBuZXdEYXRhID0ge307XG4gIHNldFN0b3JhZ2UoXCJzZXR0aW5nc1wiLCB7IHNldHRpbmdzIH0pLnRoZW4oKGRhdGEpID0+IHtcbiAgICBuZXdEYXRhID0gT2JqZWN0LmFzc2lnbihuZXdEYXRhLCBkYXRhKTtcbiAgICBjYWxsYmFjayhuZXdEYXRhKTtcbiAgfSk7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9